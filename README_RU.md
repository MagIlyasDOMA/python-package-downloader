# Python Package Downloader (PPD) - Документация
#### [Documentation in English](#en-doc)

## Описание
**Python Package Downloader (PPD)** — это инструмент командной строки для удобной загрузки и распаковки Python пакетов в виде `.whl` файлов с возможностью автоматического извлечения и управления зависимостями.

## Установка
```shell
pip install python-package-downloader
```

После установки доступны три команды для запуска:
- `ppd` (рекомендуется)
- `python-package-downloader`
- `python_package_downloader`

## Основное использование
### Базовый синтаксис
```shell
ppd <пакет1> <пакет2> ... [опции]
```

### Примеры
```shell
# Загрузка и распаковка одного пакета
ppd requests

# Загрузка нескольких пакетов
ppd numpy pandas matplotlib

# Загрузка из файла requirements.txt
ppd --requirements requirements.txt

# Загрузка из нескольких файлов зависимостей
ppd -r req1.txt -r req2.txt

# Создание выходного файла зависимостей
ppd requests --output-requirements my_deps.txt

# Обновление самого ppd
ppd --upgrade
```

## Опции командной строки
### Обязательные аргументы
- `packages` — один или несколько пакетов для загрузки (позиционный аргумент)

### Основные опции
| Опция                                                       | Короткая версия | Описание                                      | Изменения в версии 2.0.0                                                      |
|-------------------------------------------------------------|-----------------|-----------------------------------------------|-------------------------------------------------------------------------------|
| `--version`, `-v`                                           | `-v`            | Показать версию программы                     | -                                                                             |
| `--directory`, `-d`                                         | `-d <путь>`     | Директория для загрузки и распаковки пакетов  | -                                                                             |
| `--save-wheel`, `-w`                                        | `-w`            | Сохранить .whl файлы после распаковки         | -                                                                             |
| `--save-dist-info`, `-i`                                    | `-i`            | Сохранить .dist-info директории               | -                                                                             |
| `--requirements-file`, `--requirements`, `-r`               | `-r [путь]`     | Загрузить пакеты из файла requirements.txt    | КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ: Теперь это ВХОДНОЙ файл, поддерживает несколько файлов |
| `--upgrade`, `-U`                                           | `-U`            | Обновить `ppd` до последней версии и выйти    | -                                                                             |
| `--from-file`, `--from-requirements-file`, `-f`             | -               |                                               | Устарело, используйте --requirements                                          |
| `--output-requirements-file`, `--output-requirements`, `-f` | `-f [путь]`     | Создать файл requirements.txt с зависимостями | НОВАЯ ОПЦИЯ: Для создания файла зависимостей                                  |

### Управление выводом (логированием)
| Опция                                                                              | Короткая версия | Значения                                                                                | Описание                   |
|------------------------------------------------------------------------------------|-----------------|-----------------------------------------------------------------------------------------|----------------------------|
| `--logging-level`, `--log-level`, `--loglevel`, `--log`, `--verbosity`, `-l`, `-V` | `-l`, `-V`      | `0-7` или `silent`, `critical`, `error`, `warning`, `info`, `verbose`, `debug`, `silly` | Уровень детализации вывода |

#### Уровни логирования:
- `0` / `silent` — полностью тихий режим
- `1` / `critical` — только критические ошибки
- `2` / `error` — ошибки
- `3` / `warning` — предупреждения
- `4` / `info` — обычная информация (по умолчанию)
- `5` / `verbose` — подробная информация
- `6` / `debug` — отладочная информация
- `7` / `silly` — максимальная детализация

## Детальное описание функциональности
### Процесс работы
1. **Загрузка пакетов:** Программа использует `pip download` для загрузки `.whl` файлов без зависимостей
2. **Поддержка файлов:** Может читать пакеты из файлов `requirements.txt`
3. **Распаковка:** Автоматически извлекает содержимое `.whl` файлов
4. **Очистка:** По умолчанию удаляет `.whl` файлы и `.dist-info` директории после распаковки
5. **Управление зависимостями:** Может создать файл `requirements.txt` с зависимостями пакетов

### Особенности
- **Автоматическое определение Python:** Находит доступный интерпретатор Python в системе
- **Обработка ошибок:** Различные уровни отображения ошибок в зависимости от уровня логирования
- **Цветной вывод:** Использует цветное форматирование для лучшей читаемости
- **Проверка обновлений:** Автоматически проверяет наличие новых версий

### Файлы и директории
По умолчанию программа:
1. Загружает `.whl` файлы в текущую директорию (или указанную через `-d`)
2. Распаковывает их в ту же директорию
3. Удаляет `.whl` файлы (если не указан `--save-wheel`)
4. Удаляет `.dist-info` директории (если не указан `--save-dist-info`)
5. Создает `requirements.txt` с зависимостями (если указан `-r`)

## Примеры использования
### Пример 1: Загрузка пакета для офлайн-установки
```shell
# Загрузить пакет в текущую директорию
ppd requests

# Результат:
# - Директория requests/ с содержимым пакета
# - Файлы пакета готовы для использования
```

### Пример 2: Создание портативной библиотеки
```shell
# Создать директорию с несколькими пакетами
ppd numpy pandas matplotlib --directory ./data_science_packages

# Сохранить информацию о зависимостях
ppd numpy pandas matplotlib -r ./requirements.txt
```

### Пример 3: Тихий режим для скриптов
```shell
# Минимальный вывод, только ошибки
ppd some-package --log-level silent
# или
ppd some-package -l 0
```

### Пример 4: Отладка проблем
```shell
# Максимально подробный вывод
ppd problematic-package --log-level silly
# или
ppd problematic-package -l 7
```

### Пример 5: Загрузка из файла зависимостей
```shell
# Создать requirements.txt
echo "requests==2.31.0" > requirements.txt
echo "numpy>=1.24.0" >> requirements.txt

# Загрузить все пакеты из файла
ppd --from-file requirements.txt

# Или короткая форма
ppd -f
```

### Пример 6: Комбинирование источников
```shell
# Загрузить пакеты из файла и дополнительные пакеты
ppd --from-file base_requirements.txt flask django

# Несколько файлов зависимостей
ppd -f requirements.txt -f dev_requirements.txt
```

### Пример 7: Обновление и управление
```shell
# Проверить наличие обновлений (автоматически при --help)
ppd --help

# Обновить ppd
ppd --upgrade
# или
ppd -U

# Обновить с минимальным выводом
ppd -U -l silent
```

### Пример 8: Создание портативного окружения
```shell
# Создать директорию со всеми зависимостями проекта
ppd --from-file requirements.txt --directory ./vendor --requirements-file ./vendor_requirements.txt

# Результат:
# - ./vendor/ с распакованными пакетами
# - ./vendor_requirements.txt со всеми зависимостями
```

### Пример 9: Продвинутое логирование
```shell
# Полная отладка процесса загрузки
ppd complex-package --log-level silly --directory ./debug

# Тихий режим для скриптов
ppd some-package -l 0

# Только ошибки и предупреждения
ppd another-package --log-level warning
```

### Пример 10: Комбинированное использование --requirements и --output-requirements
```shell
# Загрузка из нескольких файлов + создание выходного файла
ppd -r base.txt -r dev.txt -f all_dependencies.txt

# Загрузка из файла + дополнительные пакеты
ppd -r requirements.txt flask django --output-requirements full_requirements.txt
```

## Требования
- Python >= 3.10
- Доступ к интернету для загрузки пакетов
- Установленный `pip` в системе

## Разрешения
- MIT License
- Кроссплатформенный (Windows, Linux, macOS)

## Поддержка и обратная связь
- Автор: Маг Ильяс DOMA (MagIlyasDOMA)
- Email: magilyas.doma.09@list.ru
- GitHub: [https://github.com/MagIlyasDOMA/python-package-downloader](https://github.com/MagIlyasDOMA/python-package-downloader)
- PyPI: [https://pypi.org/project/python-package-downloader/](https://pypi.org/project/python-package-downloader/)

## Примечания
- Программа использует `pip download --no-deps`, поэтому зависимости не загружаются автоматически
- Для получения зависимостей используйте опцию `-r` для создания файла requirements.txt
- Рекомендуется использовать виртуальные окружения для изоляции пакетов
- Опция `--upgrade` не может использоваться вместе с другими пакетами

## Обновление
```shell
# Проверка обновлений (автоматическая при запуске)
ppd --version

# Ручное обновление
pip install --upgrade python-package-downloader
# Или
ppd --upgrade
```

## Коды выхода
- `0` — успешное выполнение
- `1` — ошибка при выполнении 
- `2` — синтаксическая ошибка (неправильно указаны аргументы)

## Советы по использованию
1. **Для CI/CD:** Используйте `-l silent` для чистого вывода в скриптах
2. **Для отладки:** Используйте `-l silly` для максимальной информации
3. **Для офлайн-инсталляций:** Комбинируйте `-f` и `-r` для создания полного набора зависимостей
4. **Для обновления:** Регулярно проверяйте обновления через `ppd --help`